import{_ as q}from"./round-plus-f1fff6bd.js";import{b as R,c as F,f as Q,h as X,i as Y,j as H,k as M,l as Z,m as ee}from"./dynamic-41b1b26f.js";import{d as ae,bm as le,r as d,h as w,aO as te,aP as ue,aX as n,aS as p,aQ as _,aT as y,ae as re,aY as se,bF as ne}from"./index-e9ed0e0e.js";import{_ as pe,a as ie}from"./Grid-034146f3.js";import{_ as W}from"./Input-dd6f5e07.js";import{_ as K}from"./Select-227e2db3.js";import{_ as de}from"./Space-5f39c62b.js";import{_ as oe}from"./InputGroup-868717a0.js";import{_ as ce}from"./DataTable-281d2743.js";import"./next-frame-once-7035a838.js";import"./Suffix-bca8596e.js";import"./use-merged-state-496c4ad7.js";import"./use-compitable-74186af3.js";import"./Tag-b8d65896.js";import"./cssr-11db33b0.js";import"./Popover-0534a616.js";import"./get-c6b7aef5.js";import"./format-length-c9d165c6.js";import"./Checkbox-98c4e004.js";import"./Dropdown-a3ff842e.js";const ve={class:"overflow-hidden"},me={class:"flex-col h-full"},ye=_("div",{class:"w-25"}," 实体对象：",-1),_e=_("div",{class:"w-25"}," Crud方式：",-1),be={class:"flex-col h-140"},ge={class:"flex-col h-full"},ze=ae({__name:"index",setup(fe){const j=le().userInfo,x=d([]),t=d([]),s=d(""),o=d(""),a=d(""),C=d([{label:"等于",value:"=="},{label:"不等于",value:"!="},{label:"模糊查询",value:"%"},{label:"大于",value:">"},{label:"大于等于",value:">="},{label:"小于",value:"<"},{label:"小于等于",value:"<="},{label:"In",value:"in"},{label:"NotIn",value:"!in"},{label:"左模糊",value:"ll"},{label:"右模糊",value:"lr"},{label:"IsNull",value:"null"},{label:"EquaNull",value:"=null"},{label:"NotNull",value:"not"},{label:"模糊取反",value:"noLike"},{label:"LikeOr",value:"inLike"}]),L=d([{label:"添加请求",value:"add"},{label:"修改请求",value:"edit"},{label:"删除请求",value:"del"},{label:"List条件请求",value:"list"},{label:"PageList分页条件请求",value:"page"},{label:"One单记录条件请求",value:"one"}]),A=d([{key:"key",title:"参数名",align:"center",render(u,l){return w(W,{key:l,value:u.pKey,disabled:!0,onUpdateValue(r){t.value[l].pKey=r}})}},{title:"查询条件",key:"pWhere",render(u,l){return o.value!=="add"&&o.value!=="edit"&&o.value!=="del"&&u.pKey!=="pageNum"&&u.pKey!=="pageSize"&&u.pKey!=="parentIdName"&&u.pKey!=="id"?w(K,{key:l,options:C.value,value:u.pWhere,height:"800px",onUpdateValue(r){t.value[l].pWhere=r}}):w(K,{key:l,options:C.value,value:u.pWhere,disabled:!0,onUpdateValue(r){t.value[l].pWhere=r}})}},{key:"value",title:"参数值",align:"center",render(u,l){return w(W,{key:l,value:u.pValue,onUpdateValue(r){t.value[l].pValue=r}})}}]),z=async u=>{switch(await $(s.value),u){case"edit":t.value.push({pKey:"id",pWhere:"",pValue:""});break;case"del":t.value=[],t.value.push({pKey:"id",pWhere:"",pValue:""});break;case"page":t.value.push({pKey:"pageNum",pWhere:"",pValue:1}),t.value.push({pKey:"pageSize",pWhere:"",pValue:10});break;case"tree":t.value.push({pKey:"parentIdName",pWhere:"",pValue:"Pid"});break;case"one":t.value=[],t.value.push({pKey:"id",pWhere:"",pValue:""});break}a.value=""},B=async()=>{const{data:u}=await ee({tenantId:j.id});u.code===200&&u.data.forEach(l=>{x.value.push({label:l.tableName,value:l.id})})},G=async()=>{var u,l,r,b,g,v,c,f,i;if(!s.value){(u=window.$message)==null||u.error("请选择实体对象！");return}if(!o.value){(l=window.$message)==null||l.error("请选择Crud方式！");return}switch(o.value){case"add":let O={};t.value.forEach(e=>{e.pKey!=="Id"&&e.pKey!=="CreateTime"&&e.pKey!=="UpdateTime"&&Object.defineProperty(O,e.pKey,{value:e.pValue,writable:!0,enumerable:!0,configurable:!0})});const N=await M({tableId:s.value,param:O});N.data.code===200&&((r=window.$message)==null||r.success(N.data.msg)),a.value="请求类型：POST",a.value+=`\r
请求参数：`+JSON.stringify(O,null,4),a.value+=`\r
响应结果：`+JSON.stringify(N,null,4);break;case"edit":let T={};t.value.forEach(e=>{e.pKey!=="CreateTime"&&e.pKey!=="UpdateTime"&&Object.defineProperty(T,e.pKey,{value:e.pValue,writable:!0,enumerable:!0,configurable:!0})});const I=await H({tableId:s.value,param:T});I.data.code===200&&((b=window.$message)==null||b.success(I.data.msg)),a.value=`请求类型：POST\r
`,a.value+="请求数据表ID："+JSON.stringify(s.value,null,4),a.value+=`\r
请求参数：`+JSON.stringify(T,null,4),a.value+=`\r
响应结果：`+JSON.stringify(I,null,4);break;case"del":let S={};t.value.forEach(e=>{e.pKey!=="CreateTime"&&e.pKey!=="UpdateTime"&&Object.defineProperty(S,e.pKey,{value:e.pValue,writable:!0,enumerable:!0,configurable:!0})});const k=await Y({tableId:s.value,param:S});k.data.code===200&&((g=window.$message)==null||g.success(k.data.msg)),a.value=`请求类型：POST\r
`,a.value+="请求数据表ID："+JSON.stringify(s.value,null,4),a.value+=`\r
请求参数：`+JSON.stringify(S,null,4),a.value+=`\r
响应结果：`+JSON.stringify(k,null,4);break;case"list":let V={};t.value.forEach(e=>{e.pKey!=="Id"&&e.pKey!=="CreateTime"&&e.pKey!=="UpdateTime"&&Object.defineProperty(V,e.pKey+"_"+e.pWhere,{value:e.pValue,writable:!0,enumerable:!0,configurable:!0})});const P=await X({tableId:s.value,param:V});P.data.code===200&&((v=window.$message)==null||v.success(P.data.msg)),a.value=`请求类型：GET\r
`,a.value+="请求数据表ID："+JSON.stringify(s.value,null,4),a.value+=`\r
请求参数：`+JSON.stringify(V,null,4),a.value+=`\r
响应结果：`+JSON.stringify(P,null,4);break;case"page":let m={};t.value.forEach(e=>{e.pKey!=="Id"&&e.pKey!=="CreateTime"&&e.pKey!=="UpdateTime"&&(e.pKey==="pageNum"?Object.defineProperty(m,e.pKey,{value:e.pValue,writable:!0,enumerable:!0,configurable:!0}):e.pKey==="pageSize"?Object.defineProperty(m,e.pKey,{value:e.pValue,writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(m,e.pKey+"_"+e.pWhere,{value:e.pValue,writable:!0,enumerable:!0,configurable:!0}))});const J=await Q({tableId:s.value,param:m});J.data.code===200&&((c=window.$message)==null||c.success(J.data.msg)),a.value=`请求类型：GET\r
`,a.value+="请求数据表ID："+JSON.stringify(s.value,null,4),a.value+=`\r
请求参数：`+JSON.stringify(m,null,4),a.value+=`\r
响应结果：`+JSON.stringify(J,null,4);break;case"tree":let h={};t.value.forEach(e=>{e.pKey!=="Id"&&e.pKey!=="CreateTime"&&e.pKey!=="UpdateTime"&&(e.pKey==="parentIdName"?Object.defineProperty(h,e.pKey,{value:e.pValue,writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(h,e.pKey+"_"+e.pWhere,{value:e.pValue,writable:!0,enumerable:!0,configurable:!0}))});const E=await F({tableId:s.value,param:h});E.data.code===200&&((f=window.$message)==null||f.success(E.data.msg)),a.value=`请求类型：GET\r
`,a.value+="请求数据表ID："+JSON.stringify(s.value,null,4),a.value+=`\r
请求参数：`+JSON.stringify(h,null,4),a.value+=`\r
响应结果：`+JSON.stringify(E,null,4);break;case"one":let D={};t.value.forEach(e=>{e.pKey==="id"&&Object.defineProperty(D,e.pKey+"_==",{value:e.pValue,writable:!0,enumerable:!0,configurable:!0})});const U=await R({tableId:s.value,param:D});U.data.code===200&&((i=window.$message)==null||i.success(U.data.msg)),a.value=`请求类型：GET\r
`,a.value+="请求数据表ID："+JSON.stringify(s.value,null,4),a.value+=`\r
请求参数：`+JSON.stringify(D,null,4),a.value+=`\r
响应结果：`+JSON.stringify(U,null,4);break}},$=async u=>{s.value=u;const l=await Z({tableId:s.value});l.data.code===200&&(t.value=[],l.data.data.forEach(r=>{r.fieldName!=="Id"&&r.fieldName!=="CreateTime"&&r.fieldName!=="UpdateTime"&&t.value.push({pKey:r.fieldName,pWhere:"%",pValue:""})}))};return(async()=>{await B()})(),(u,l)=>{const r=oe,b=q,g=ce,v=ne,c=pe,f=ie;return te(),ue("div",ve,[n(f,{cols:24,class:"h-full"},{default:p(()=>[n(c,{span:12},{default:p(()=>[n(v,{title:"动态API接口调试",bordered:!1,class:"h-full rounded-8px shadow-sm"},{default:p(()=>[_("div",me,[n(y(de),{vertical:""},{default:p(()=>[n(r,null,{default:p(()=>[ye,n(y(K),{value:s.value,"onUpdate:value":[l[0]||(l[0]=i=>s.value=i),$],options:x.value},null,8,["value","options"])]),_:1}),n(r,null,{default:p(()=>[_e,n(y(K),{value:o.value,"onUpdate:value":l[1]||(l[1]=i=>o.value=i),options:L.value,onChange:z},null,8,["value","options"])]),_:1}),n(r,null,{default:p(()=>[n(y(re),{class:"flex-1-hidden",type:"primary",onClick:G},{default:p(()=>[n(b,{class:"mr-4px text-20px"}),se(" 发送请求 ")]),_:1})]),_:1}),n(r,null,{default:p(()=>[_("div",be,[n(g,{columns:A.value,data:t.value,"flex-height":"",class:"flex-1-hidden"},null,8,["columns","data"])])]),_:1})]),_:1})])]),_:1})]),_:1}),n(c,{span:1}),n(c,{span:11},{default:p(()=>[n(v,{title:"动态API接口调试输出",bordered:!1,class:"h-full rounded-8px shadow-sm"},{default:p(()=>[_("div",ge,[n(y(W),{type:"textarea",readonly:!0,value:a.value,"onUpdate:value":l[2]||(l[2]=i=>a.value=i),placeholder:"请求结果",autosize:{minRows:30,maxRows:30}},null,8,["value"])])]),_:1})]),_:1})]),_:1})])}}});export{ze as default};
