import{_ as X}from"./refresh-83571ede.js";import{aO as k,aP as z,aQ as L,eV as Y,eW as Q,d as j,c as E,r as U,bt as Z,w as q,aR as P,aS as n,aX as e,a_ as W,aY as m,aV as I,aT as u,eX as G,ax as J,eY as K,ae as y,b3 as ee,a$ as te,b4 as ne,eZ as ae,e_ as oe,aU as le,bf as se,bF as ie}from"./index-e9ed0e0e.js";import{_ as ue}from"./round-plus-f1fff6bd.js";import{u as ce}from"./use-loading-62d2aacf.js";import{c as D,f as H,a as re}from"./rule-7c323978.js";import{a as pe,b as _e,_ as de}from"./DataTable-281d2743.js";import{_ as me}from"./Input-dd6f5e07.js";import{_ as fe}from"./FormItemGridItem-6f6a168c.js";import{_ as ge}from"./InputNumber-6578f265.js";import{_ as ve}from"./Select-227e2db3.js";import{a as he}from"./Grid-034146f3.js";import{_ as V}from"./Space-5f39c62b.js";import{V as be,_ as xe}from"./vuedraggable.umd-8dbe5ada.js";import{_ as ye}from"./setting-outlined-7a04a85c.js";import{_ as ke}from"./Checkbox-98c4e004.js";import{c as we}from"./Popover-0534a616.js";import{N as A}from"./Tag-b8d65896.js";import{N as $e}from"./Popconfirm-d647cf5b.js";import"./format-length-c9d165c6.js";import"./get-c6b7aef5.js";import"./use-merged-state-496c4ad7.js";import"./Suffix-bca8596e.js";import"./Dropdown-a3ff842e.js";import"./next-frame-once-7035a838.js";import"./Add-063aad0f.js";import"./use-compitable-74186af3.js";import"./cssr-11db33b0.js";const Se={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"},Ue=L("path",{fill:"currentColor",d:"M8.71 7.71L11 5.41V15a1 1 0 0 0 2 0V5.41l2.29 2.3a1 1 0 0 0 1.42 0a1 1 0 0 0 0-1.42l-4-4a1 1 0 0 0-.33-.21a1 1 0 0 0-.76 0a1 1 0 0 0-.33.21l-4 4a1 1 0 1 0 1.42 1.42ZM21 14a1 1 0 0 0-1 1v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-4a1 1 0 0 0-2 0v4a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-4a1 1 0 0 0-1-1Z"},null,-1),Te=[Ue];function Ce(r,p){return k(),z("svg",Se,Te)}const Ve={name:"uil-export",render:Ce},ze={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"},Me=L("path",{fill:"currentColor",d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v10zM18 4h-2.5l-.71-.71c-.18-.18-.44-.29-.7-.29H9.91c-.26 0-.52.11-.7.29L8.5 4H6c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1z"},null,-1),De=[Me];function Le(r,p){return k(),z("svg",ze,De)}const Fe={name:"ic-round-delete",render:Le};function Be(r){return r?r.map((p,c)=>({index:c+1,key:p.id,...p})):[]}const Ne=async()=>{const r=await Y.post("/getAllUserList");return Q(Be,r)},Re=j({name:"TableActionModal",__name:"table-action-modal",props:{visible:{type:Boolean},type:{default:"add"},editData:{default:null}},emits:["update:visible"],setup(r,{emit:p}){const c=r,f=E({get(){return c.visible},set(s){p("update:visible",s)}}),b=()=>{f.value=!1},h=E(()=>({add:"添加用户",edit:"编辑用户"})[c.type]),g=U(),o=Z(_()),v={account:D("请输入用户名"),age:D("请输入年龄"),gender:D("请选择性别"),phone:H.phone,email:H.email,userStatus:D("请选择用户状态")};function _(){return{account:"",age:null,gender:null,phone:"",email:null,userStatus:null}}function w(s){Object.assign(o,s)}function $(){({add:()=>{const a=_();w(a)},edit:()=>{c.editData&&w(c.editData)}})[c.type]()}async function d(){var s,a;await((s=g.value)==null?void 0:s.validate()),(a=window.$message)==null||a.success("新增成功!"),b()}return q(()=>c.visible,s=>{s&&$()}),(s,a)=>{const T=me,x=fe,S=ge,F=pe,t=_e,i=ve,C=he,M=y,B=V,N=re,R=ee;return k(),P(R,{show:f.value,"onUpdate:show":a[6]||(a[6]=l=>f.value=l),preset:"card",title:h.value,class:"w-700px"},{default:n(()=>[e(N,{ref_key:"formRef",ref:g,"label-placement":"left","label-width":80,model:o,rules:v},{default:n(()=>[e(C,{cols:24,"x-gap":18},{default:n(()=>[e(x,{span:12,label:"用户名",path:"account"},{default:n(()=>[e(T,{value:o.account,"onUpdate:value":a[0]||(a[0]=l=>o.account=l)},null,8,["value"])]),_:1}),e(x,{span:12,label:"年龄",path:"age"},{default:n(()=>[e(S,{value:o.age,"onUpdate:value":a[1]||(a[1]=l=>o.age=l),clearable:""},null,8,["value"])]),_:1}),e(x,{span:12,label:"性别",path:"gender"},{default:n(()=>[e(t,{value:o.gender,"onUpdate:value":a[2]||(a[2]=l=>o.gender=l)},{default:n(()=>[(k(!0),z(J,null,W(u(G),l=>(k(),P(F,{key:l.value,value:l.value},{default:n(()=>[m(I(l.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),e(x,{span:12,label:"手机号",path:"phone"},{default:n(()=>[e(T,{value:o.phone,"onUpdate:value":a[3]||(a[3]=l=>o.phone=l)},null,8,["value"])]),_:1}),e(x,{span:12,label:"邮箱",path:"email"},{default:n(()=>[e(T,{value:o.email,"onUpdate:value":a[4]||(a[4]=l=>o.email=l)},null,8,["value"])]),_:1}),e(x,{span:12,label:"状态",path:"userStatus"},{default:n(()=>[e(i,{value:o.userStatus,"onUpdate:value":a[5]||(a[5]=l=>o.userStatus=l),options:u(K)},null,8,["value","options"])]),_:1})]),_:1}),e(B,{class:"w-full pt-16px",size:24,justify:"end"},{default:n(()=>[e(M,{class:"w-72px",onClick:b},{default:n(()=>[m("取消")]),_:1}),e(M,{class:"w-72px",type:"primary",onClick:d},{default:n(()=>[m("确定")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["show","title"])}}}),Oe={class:"w-180px"},Pe={key:0,class:"flex-y-center h-36px px-12px hover:bg-primary_active"},je=j({__name:"column-setting",props:{columns:{}},emits:["update:columns"],setup(r,{emit:p}){const c=r,f=U(b());function b(){return c.columns.map(h=>({...h,checked:!0}))}return q(f,h=>{const o=h.filter(v=>v.checked).map(v=>{const _={...v};return delete _.checked,_});p("update:columns",o)},{deep:!0}),(h,g)=>{const o=ye,v=y,_=xe,w=ke,$=we;return k(),P($,{placement:"bottom",trigger:"click"},{trigger:n(()=>[e(v,{size:"small",type:"primary"},{default:n(()=>[e(o,{class:"mr-4px text-16px"}),m(" 表格列设置 ")]),_:1})]),default:n(()=>[L("div",Oe,[e(u(be),{modelValue:f.value,"onUpdate:modelValue":g[0]||(g[0]=d=>f.value=d),"item-key":"key"},{item:n(({element:d})=>[d.key?(k(),z("div",Pe,[e(_,{class:"mr-8px text-20px cursor-move"}),e(w,{checked:d.checked,"onUpdate:checked":s=>d.checked=s},{default:n(()=>[m(I(d.title),1)]),_:2},1032,["checked","onUpdate:checked"])])):te("",!0)]),_:1},8,["modelValue"])])]),_:1})}}}),Ee={class:"overflow-hidden"},He={class:"flex-col h-full"},gt=j({__name:"index",setup(r){const{loading:p,startLoading:c,endLoading:f}=ce(!1),{bool:b,setTrue:h}=ne(),g=U([]);function o(t){g.value=t}async function v(){c();const{data:t}=await Ne();t&&setTimeout(()=>{o(t),f()},1e3)}const _=U([{type:"selection",align:"center"},{key:"index",title:"序号",align:"center"},{key:"account",title:"用户名",align:"center"},{key:"age",title:"用户年龄",align:"center"},{key:"gender",title:"性别",align:"center",render:t=>t.gender?e(A,{type:{0:"success",1:"warning"}[t.gender]},{default:()=>[ae[t.gender]]}):e("span",null,null)},{key:"phone",title:"手机号码",align:"center"},{key:"email",title:"邮箱",align:"center"},{key:"userStatus",title:"状态",align:"center",render:t=>t.userStatus?e(A,{type:{1:"success",2:"error",3:"warning",4:"default"}[t.userStatus]},{default:()=>[oe[t.userStatus]]}):e("span",null,null)},{key:"actions",title:"操作",align:"center",render:t=>e(V,{justify:"center"},{default:()=>[e(y,{size:"small",onClick:()=>T(t.id)},{default:()=>[m("编辑")]}),e($e,{onPositiveClick:()=>x(t.id)},{default:()=>"确认删除",trigger:()=>e(y,{size:"small"},{default:()=>[m("删除")]})})]})}]),w=U("add");function $(t){w.value=t}const d=U(null);function s(t){d.value=t}function a(){h(),$("add")}function T(t){const i=g.value.find(C=>C.id===t);i&&s(i),$("edit"),h()}function x(t){var i;(i=window.$message)==null||i.info(`点击了删除，rowId为${t}`)}const S=Z({page:1,pageSize:10,showSizePicker:!0,pageSizes:[10,15,20,25,30],onChange:t=>{S.page=t},onUpdatePageSize:t=>{S.pageSize=t,S.page=1}});function F(){v()}return F(),(t,i)=>{const C=ue,M=Fe,B=Ve,N=X,R=de,l=ie;return k(),z("div",Ee,[e(l,{title:"用户管理",bordered:!1,class:"h-full rounded-8px shadow-sm"},{default:n(()=>[L("div",He,[e(u(V),{class:"pb-12px",justify:"space-between"},{default:n(()=>[e(u(V),null,{default:n(()=>[e(u(y),{type:"primary",onClick:a},{default:n(()=>[e(C,{class:"mr-4px text-20px"}),m(" 新增 ")]),_:1}),e(u(y),{type:"error"},{default:n(()=>[e(M,{class:"mr-4px text-20px"}),m(" 删除 ")]),_:1}),e(u(y),{type:"success"},{default:n(()=>[e(B,{class:"mr-4px text-20px"}),m(" 导出Excel ")]),_:1})]),_:1}),e(u(V),{align:"center",size:18},{default:n(()=>[e(u(y),{size:"small",type:"primary",onClick:v},{default:n(()=>[e(N,{class:le(["mr-4px text-16px",{"animate-spin":u(p)}])},null,8,["class"]),m(" 刷新表格 ")]),_:1}),e(je,{columns:_.value,"onUpdate:columns":i[0]||(i[0]=O=>_.value=O)},null,8,["columns"])]),_:1})]),_:1}),e(R,{columns:_.value,data:g.value,loading:u(p),pagination:S,"flex-height":"",class:"flex-1-hidden"},null,8,["columns","data","loading","pagination"]),e(Re,{visible:u(b),"onUpdate:visible":i[1]||(i[1]=O=>se(b)?b.value=O:null),type:w.value,"edit-data":d.value},null,8,["visible","type","edit-data"])])]),_:1})])}}});export{gt as default};
